# ============================================================

meta:
  name: "AZC-B Vocabulary Correlation Contract"
  acronym: "AZC-B-ACT"
  version: "1.2"
  date: "2026-02-06"
  status: "LOCKED"
  layer_type: "correlation contract"
  derived_from: "Tier-2 constraints only"
  audit_note: "v1.2: Pipeline framing removed per AZC_POSITION_VOCABULARY (2026-01-31) finding that AZC is static lookup table with no independent positional effect."
  governance: |
    AZC-B-ACT is NOT authoritative. Constraints are authoritative.
    AZC-B-ACT describes HOW vocabulary classified in AZC co-varies with B behavior.
    Do not edit without updating source constraints first.

# ============================================================
scope:
  function: "How AZC legality states constrain Currier B execution"
  direction: "AZC -> B (vocabulary-mediated correlation, not reverse)"
  b_grammar_authority: false  # Does not modify B grammar
  a_visibility: false  # B does not see A entries
  azc_visibility: false  # B does not see AZC internal structure

# Explicit ownership declaration (prevents misreading)
ownership:
  azc_b_act_owns:
    - nothing
  azc_b_act_describes:
    - legality_correlation
    - intervention_permission_envelope
    - vocabulary_restriction_inheritance

# What B receives (effects, not signals)
b_reception:
  receives:
    - description: "Grammar paths silently constrained by legality"
    - description: "Intervention permission envelope"
    - description: "Vocabulary restriction inheritance"
  does_not_receive:
    - "Currier A entry identity"
    - "AZC internal structure"
    - "Why tokens are legal/illegal"
    - "Compatibility graph mechanics"
    - "Positional semantics (C, P, R, S zones)"

guarantees:
  - id: "LEGALITY_CORRELATION"
    statement: "Vocabulary classified at high-escape AZC positions produces high escape rates in B (28x difference); both determined by vocabulary properties"
    provenance: "C468"

  - id: "RESTRICTION_PRESERVATION"
    statement: "MIDDLE restrictions transfer intact to B"
    provenance: "C470"

  - id: "GRAMMAR_INDEPENDENCE"
    statement: "B grammar is unchanged by AZC legality"
    provenance: "C121, C124"

  - id: "BLIND_EXECUTION"
    statement: "B executes without knowledge of upstream mechanics"
    provenance: "C384, C468"

  - id: "CATEGORICAL_RESOLUTION"
    statement: "Resolution via vocabulary availability, not parameters"
    provenance: "C469"

# ============================================================
invariants:
  vocabulary_mediated_correlation:
    statement: "AZC positional classification and B intervention dynamics co-vary via shared vocabulary properties"
    provenance: "C468"

  restriction_correlation:
    statement: "Vocabulary restrictions correlate across AZC and B contexts"
    provenance: "C470"

  grammar_stability:
    statement: "B grammar rules apply universally regardless of AZC source"
    provenance: "C124"

  non_parametric:
    statement: "No numeric values are encoded; all distinctions are categorical"
    provenance: "C469"

  no_token_transmission:
    statement: "No tokens are transmitted from Currier A to Currier B"
    provenance: "C384, C281, C285, C343"

# ============================================================
inputs:
  from_azc:
    type: "legality_effect"
    components:
      - escape_permission: "Position-indexed intervention permission envelope"
      - folio_restriction: "MIDDLE-level compatibility constraints"
    provenance: "C443, C468, C470"

  not_exported:
    - "AZC position labels (C, P, R, S)"
    - "Folio identity"
    - "Family membership (Zodiac vs A/C)"
    - "Compatibility graph structure"
    - "Escape rate thresholds or numeric values"

# ============================================================
correlation:

  escape_permission_transfer:
    direction: "Higher AZC escape permission yields higher B escape incidence"
    categorical: true
    parametric: false
    provenance: "C468"

  vocabulary_restriction_transfer:
    direction: "Restricted MIDDLEs remain restricted in B"
    categorical: true
    parametric: false
    provenance: "C470"

  categorical_resolution:
    effect: "Fine distinctions encoded in which tokens are legal"
    provenance: "C469"

  vanishing_semantics:
    statement: "Illegality manifests as absence, not marking"
    provenance: "C444, C468"

  vocabulary_scope:
    statement: "B vocabulary is restricted to A-record MIDDLEs only"
    expansion: false  # AZC does NOT expand vocabulary beyond A specification
    filtering_magnitude: "~80% of B vocabulary filtered per A context"
    effect: "Different A records make different B folios viable"
    provenance: "C481, C502"

# ============================================================
b_reception_architecture:

  escape_routes:
    primary: "qo-prefix tokens"
    role_stratification:
      primary: "ENERGY_OPERATOR"
      secondary: "CORE_CONTROL"
    provenance: "C397, C398"

  stability_anchor:
    provenance: "C105"

  design_constraints:
    hazard_exposure: "CLAMPED"
    intervention_operations: "FREE"
    principle: "Constrain dangerous interactions; let intervention vary"
    provenance: "C458"

# ============================================================
b_isolation:

  blocked:
    - item: "A entry identity"
      reason: "C384 - no entry-level coupling"
    - item: "AZC position structure"
      reason: "B receives effects, not positions"
    - item: "AZC folio semantics"
      reason: "Folio identity does not transfer"
    - item: "Compatibility graph"
      reason: "B sees legal/illegal as absence/presence, not why"
    - item: "MIDDLE incompatibility details"
      reason: "Filtering happens upstream"
    - item: "Numeric thresholds or ratios"
      reason: "C469 - categorical resolution only"

# ============================================================
negative_guarantees:
  - guarantee: "No A entry visibility in B"
    reason: "C384 - vocabulary-mediated only"

  - guarantee: "No AZC structure visibility in B"
    reason: "B observes effects (vocabulary availability), not AZC structure"

  - guarantee: "No B grammar modification by AZC"
    reason: "C121, C124 - grammar is universal"

  - guarantee: "No reverse inference from B to AZC"
    reason: "Correlation is vocabulary-mediated, not reverse-inferrable"

  - guarantee: "No parametric encoding"
    reason: "C469 - categorical resolution only"

  - guarantee: "No numeric values transmitted"
    reason: "All distinctions are categorical"

# ============================================================
deferred:
  - topic: "B internal grammar structure"
    reason: "Belongs to BCSC, not this activation contract"

  - topic: "49-class taxonomy details"
    reason: "B internal structure"

  - topic: "Hazard topology details"
    reason: "B internal structure"

  - topic: "LINK operator semantics"
    reason: "B internal structure"

  - topic: "Folio program taxonomy"
    reason: "B internal structure"

  - topic: "STATE-C / STATE-X semantics"
    reason: "B internal structure"

  - topic: "Procedure identity"
    reason: "B internal structure / Tier-3"

  - topic: "Process domain interpretation"
    reason: "Tier-3 speculative layer"

# ============================================================
disallowed:
  - interpretation: "B sees A entries"
    reason: "Vocabulary-mediated only (C384)"
    provenance: "C384"

  - interpretation: "B can infer AZC position"
    reason: "B sees vocabulary availability, not positional structure"
    provenance: "C468"

  - interpretation: "AZC modifies B grammar"
    reason: "Grammar is universal and unchanged"
    provenance: "C121, C124"

  - interpretation: "Recovery budget is a quantitative resource"
    reason: "Categorical permission only, no parametric values"
    provenance: "C469"

  - interpretation: "Legality is a state variable in B"
    reason: "Ambient constraint (absence/presence), not signal"
    provenance: "C468, C469"

  - interpretation: "Numeric thresholds are contractual"
    reason: "Thresholds are empirical observations, not rules"
    provenance: "C469"

  - interpretation: "AZC expands B vocabulary beyond A specification"
    reason: "AZC restricts, does not expand. Only A-record MIDDLEs are legal for B."
    provenance: "C481, C502"

# ============================================================

annotations:
  status: "NON-NORMATIVE"

  escape_statistics:
    high_context_b_escape: "28.6%"
    low_context_b_escape: "1.0%"
    ratio: "28x"
    azc_threshold_used: ">=5% vs <5%"
    provenance: "C468"

  restriction_statistics:
    restricted_middle_spread: "4.0 folios mean"
    universal_middle_spread: "50.6 folios mean"
    ratio: "12.7x"
    provenance: "C470"

  recovery_statistics:
    qo_escape_rate: "25-47%"
    e_recovery_path_rate: "54.7%"
    energy_operator_escape: "40-67%"
    core_control_escape: "22-32%"
    provenance: "C397, C398, C105"

  design_clamp_statistics:
    hazard_cv: "0.04-0.11"
    recovery_cv: "0.72-0.82"
    provenance: "C458"

# ============================================================
provenance:
  vocabulary_correlation:
    - "C468"  # Legality inheritance
    - "C469"  # Categorical resolution
    - "C470"  # MIDDLE restriction inheritance

  b_reception:
    - "C105"  # e = STABILITY_ANCHOR
    - "C397"  # qo-prefix escape route
    - "C398"  # Escape role stratification
    - "C399"  # Safe precedence pattern
    - "C458"  # Execution design clamp

  boundary_preservation:
    - "C384"  # No entry-level A-B coupling
    - "C121"  # 49 instruction classes
    - "C124"  # 100% grammar coverage

  vanishing_semantics:
    - "C444"  # Position independence (vanishing = illegality)

  invariants:
    - "C443"  # Escape gradient source
    - "C468"  # Causal transfer
    - "C470"  # Restriction preservation
    - "C469"  # Non-parametric

# ============================================================
