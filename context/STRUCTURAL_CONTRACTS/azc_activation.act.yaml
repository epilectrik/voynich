# ============================================================

meta:
  name: "AZC Positional Classification Contract"
  acronym: "AZC-ACT"
  version: "1.2"
  date: "2026-02-06"
  status: "LOCKED"
  layer_type: "mapping contract"
  derived_from: "Tier-2 constraints only"
  audit_note: "v1.2: Pipeline framing removed per AZC_POSITION_VOCABULARY (2026-01-31) finding that AZC is static lookup table with no independent positional effect."
  governance: |
    AZC-ACT is NOT authoritative. Constraints are authoritative.
    AZC-ACT describes HOW vocabulary is positionally classified in AZC.
    Do not edit without updating source constraints first.

# ============================================================
scope:
  function: "How vocabulary shared between A and AZC is positionally classified"
  direction: "A -> AZC (one-way transformation, not reverse)"
  vocabulary_authority: false  # AZC does not "own" vocabulary
  generativity: false  # No derivation rules
  b_semantics: false  # Execution is downstream, not here

# Explicit ownership declaration (prevents misreading)
ownership:
  azc_owns:
    - nothing
  azc_encodes:
    - positional_classification
    - vocabulary_grouping
    - compatibility_signature

guarantees:
  - id: "VOCABULARY_ACTIVATED"
    statement: "AZC constraint activation is vocabulary-driven"
    provenance: "C441"

  - id: "COMPATIBILITY_GROUPING"
    statement: "AZC folios group vocabulary by compatibility signature"
    provenance: "C442"

  - id: "LEGALITY_CORRELATION"
    statement: "AZC positional vocabulary profiles correlate reliably with B behavior (28x escape rate difference)"
    provenance: "C468"

  - id: "NO_CONTENT_MUTATION"
    statement: "AZC does not mutate A entry contents"
    provenance: "C444"

  - id: "FAMILY_AGNOSTIC_MECHANISM"
    statement: "AZC legality mechanism is family-agnostic"
    provenance: "C430-C436, C441-C443"

# ============================================================
invariants:
  monotonicity:
    statement: "Survivor options never increase from earlier to later positions"
    provenance: "C443, C444"

  position_independence:
    statement: "The SAME A-type can appear in any position; position determines legality, not content"
    provenance: "C444"

  vocabulary_mediation:
    statement: "All A->B relationships are vocabulary-mediated, not addressable"
    provenance: "C384, C441"

  scaffold_independence:
    statement: "Legality zones are independent of scaffold presentation"
    provenance: "C430-C436"

# ============================================================
inputs:
  accepted:
    type: "registry_entry"
    from_casc: "record_types.registry_entry"
    minimum_tokens: 2
    provenance: "C482, C484"

  excluded:
    type: "control_operator"
    reason: "Control operators are meta-structural, not registry content"
    provenance: "C484"

# ============================================================

positional_zones:
  provenance: "C306, C313"

  zones:
    C:
      function: "Interior placement, rotation-tolerant"
      escape_permission: "moderate"
      provenance: "C306, C317"


    R_series:
      members: ["R1", "R2", "R3"]
      ordering: "strictly forward (R1->R2->R3 only)"
      backward_transitions: "FORBIDDEN"
      skip_transitions: "FORBIDDEN"
      function: "Ordered interior stages, progressive escape restriction"
      escape_gradient: "decreasing (high to zero)"
      restricted_to_ordered_subscript_family: true
      observed_in: "Zodiac family (C432)"
      provenance: "C432, C434, C443"

    S_series:
      members: ["S0", "S1", "S2"]
      function: "Boundary markers, no intervention permitted"
      escape_permission: "zero"
      ordering: "S2 appears earlier than S1"
      restricted_to_ordered_subscript_family: true
      observed_in: "Zodiac family (C432)"
      provenance: "C320, C432, C435, C443"

  zone_semantics: |
    Diagram positions only: C, R-series, S-series.
    Interior diagram positions (R-series, C) have moderate escape permission.
    Boundary diagram positions (S-series) forbid intervention.
    P (Paragraph) is NOT a diagram position - it is Currier A text on AZC folios.

# ============================================================

transformations:

  compatibility_grouping:
    observation: "Specialized vocabulary appears at distinct positions; combinations that don't occur reflect fixed positional encoding"
    provenance: "C442, C475"

  escape_permission_changes:
    effect: "Same A-type has different intervention permission by position"
    provenance: "C443, C444"

  categorical_resolution:
    effect: "Operational conditions represented categorically"
    provenance: "C469"

  vocabulary_legality:
    expansion: false  # AZC does NOT expand vocabulary beyond A specification
    observation: "Only tokens with matching PREFIX, MIDDLE, and SUFFIX appear in B execution"
    morphological_correspondence:  # C502.a - full morphological correspondence
      middle_only:
        legal_tokens: "257 (5.3%)"
        excluded: "94.7%"
      middle_plus_prefix:
        legal_tokens: "92 (1.9%)"
        additional_reduction: "64%"
      middle_plus_suffix:
        legal_tokens: "130 (2.7%)"
        additional_reduction: "50%"
      full_morphology:
        legal_tokens: "38 (0.8%)"
        additional_reduction: "85% beyond MIDDLE"
    legacy_claim: "Original ~80%/~96 of 480 was MIDDLE-only against token types"
    provenance: "C481, C502, C502.a"

  content_invariants:
    - "No movement of tokens"
    - "No selection"
    - "No branching"
    - "No instruction creation"
    - "No mutation of entry contents"

# ============================================================
persistence:
  a_survivor_independence:
    statement: "A-vocabulary tokens persist independently of AZC legality windows"
    provenance: "C343"

  vanishing_semantics:
    statement: "Position exclusivity, not active filtering"
    provenance: "C444"

  restriction_inheritance:
    statement: "MIDDLE restrictions transfer to B"
    provenance: "C470"

# ============================================================
morphological_binding:

  prefix_affinity:
    provenance: "C471"

  middle_specificity:
    provenance: "C472"

  constraint_bundle:
    statement: "Each A entry functions as a constraint bundle"
    effect: "Determines which AZC legality envelopes apply"
    provenance: "C473"

# ============================================================
negative_guarantees:
  - guarantee: "No token movement"
    reason: "AZC encodes position, does not route"

  - guarantee: "No selection"
    reason: "AZC records vocabulary position; it does not select or route vocabulary"

  - guarantee: "No branching"
    reason: "No conditional paths in AZC structure"

  - guarantee: "No instruction creation"
    reason: "AZC encodes position, B executes"

  - guarantee: "No semantic content"
    reason: "Positions are legality regimes, not meanings"

  - guarantee: "No dynamic AZC decision-making"
    reason: "F-AZC-015 closed this (Case B confirmed)"

# ============================================================

deferred:
  - topic: "Zodiac vs A/C family internal scaffolds"
    reason: "Family-level structure, not A-entry transformation"

  - topic: "Ordered subscript internal semantics (R1-R3, S1-S2)"
    reason: "Zodiac internal organization, not A-entry effects"

  - topic: "Spiral topology"
    reason: "Diagram geometry, outside positional legality"

  - topic: "Diagram physical layout"
    reason: "Geometric structure, not constraint mechanics"

  - topic: "Orientation postures"
    reason: "Physical interpretation, not structural contract"

  - topic: "HT positional asymmetries"
    reason: "HT layer belongs to separate contract (HT-ACT)"

# ============================================================
disallowed:
  - interpretation: "AZC owns vocabulary"
    reason: "Vocabulary is A-derived, AZC constrains positions"
    provenance: "C441, CASC"

  - interpretation: "AZC selects procedures"
    reason: "AZC defines legality, B executes, operator selects"
    provenance: "C473"

  - interpretation: "Position encodes meaning"
    reason: "Position encodes legality constraints, not semantics"
    provenance: "C313"

  - interpretation: "AZC is addressable lookup from A entries to B programs"
    reason: "No entry-level A-B coupling exists (C384); AZC classifies vocabulary, not entries"
    provenance: "C384, C441"

  - interpretation: "AZC decides dynamically"
    reason: "Ambient legality field, not decision engine"
    provenance: "F-AZC-015"

  - interpretation: "AZC expands vocabulary beyond A specification"
    reason: "AZC restricts, does not expand. Only A-record MIDDLEs are legal for B execution."
    provenance: "C481, C502"

# ============================================================

annotations:
  status: "NON-NORMATIVE"

  zone_frequencies:
    C: "17.1% (A/C family dominant)"

  interior_rates:
    C: "77.6%"
    R_series: "89-95%"
    S_series: "95%+ at line edges"
    # P is paragraph text, not diagram - excluded from interior analysis

  escape_rates:
    # Diagram positions only (C, R, S):
    C: "~1.4%"
    R1: "2.0%"
    R2: "1.2%"
    R3: "0%"
    S_series: "0%"
    # P is paragraph text (not diagram): P=11.6%, P2=24.7% - characterizes Currier A material
    provenance: "C443"

  compatibility_statistics:
    illegal_pair_rate: "95.7%"
    legal_pair_rate: "4.3%"
    illegal_pairs_count: 673342
    legal_pairs_count: 30394
    provenance: "C475"

  morphological_affinity:
    ac_enriched_prefixes: ["qo- (91%)", "ol- (81%)"]
    zodiac_enriched_prefixes: ["ot- (54%)"]
    broadly_distributed: ["ch-", "sh-", "ok-"]
    provenance: "C471"

  middle_exclusivity:
    exclusive_rate: "77%"
    exclusive_entropy: "median = 0.0"
    shared_coverage: "18.7% vs 3.3%"
    folio_exclusive_rate: "73.5%"
    provenance: "C472, C469"

  persistence_statistics:
    a_vocab_placement_ratio: "2.2x more than AZC-only"
    high_multiplicity_coverage: "43% broader"
    restriction_inheritance_ratio: "12.7x difference preserved"
    provenance: "C343, C470"

# ============================================================
provenance:
  vocabulary_activation:
    - "C441"  # Vocabulary-activated positional encoding
    - "C442"  # Compatibility grouping

  positional_legality:
    - "C306"  # Placement-coding axis
    - "C313"  # Position constrains LEGALITY not PREDICTION
    - "C443"  # Positional escape gradient
    - "C444"  # A-type position distribution

  vocabulary_correlation:
    - "C468"  # Legality inheritance
    - "C469"  # Categorical resolution principle
    - "C470"  # MIDDLE restriction inheritance

  morphological_binding:
    - "C471"  # PREFIX encodes AZC family affinity
    - "C472"  # MIDDLE is primary carrier of folio specificity
    - "C473"  # A entry defines constraint bundle

  middle_incompatibility:
    - "C475"  # MIDDLE atomic incompatibility

  persistence:
    - "C343"  # A-AZC persistence independence

  ordered_subscript_family:
    - "C432"  # Ordered subscript exclusivity
    - "C434"  # R-series strict forward ordering
    - "C435"  # S/R positional division

  invariants:
    - "C384"  # No entry-level A-B coupling
    - "C443"  # Monotonicity source
    - "C444"  # Position independence

# ============================================================
