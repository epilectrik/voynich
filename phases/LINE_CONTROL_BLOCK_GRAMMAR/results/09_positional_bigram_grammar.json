{
  "test": "09_positional_bigram_grammar",
  "phase": "LINE_CONTROL_BLOCK_GRAMMAR",
  "purpose": "Determine whether CLASS-level bigram transition probabilities vary by positional zone within Currier B lines (8+ tokens)",
  "data": {
    "total_currier_b_lines": 2420,
    "qualifying_lines_8plus": 1919,
    "total_global_bigrams": 9621,
    "n_instruction_classes": 49,
    "line_length_stats": {
      "mean": 10.6,
      "median": 10.0,
      "min": 8,
      "max": 54
    }
  },
  "zone_definition": {
    "simplified_4_zones": {
      "INITIAL_TRANSITION": "Bigram from position 0 to 1",
      "EARLY_MEDIAL": "Bigrams at positions 1->2 and 2->3",
      "CORE": "All bigrams within positions 3 to N-4",
      "LATE_TRANSITION": "Bigrams from position N-3 to N-1"
    },
    "detailed_7_zones": {
      "INITIAL_TO_EARLY": "pos 0->1",
      "WITHIN_EARLY_MED": "pos 1->2",
      "EARLY_TO_CORE": "pos 2->3",
      "WITHIN_CORE": "all bigrams pos 3 to N-5",
      "CORE_TO_LATE": "pos N-4 -> N-3",
      "WITHIN_LATE": "pos N-3 -> N-2",
      "LATE_TO_FINAL": "pos N-2 -> N-1"
    }
  },
  "zone_bigram_counts_4zone": {
    "INITIAL_TRANSITION": 781,
    "EARLY_MEDIAL": 2066,
    "CORE": 4851,
    "LATE_TRANSITION": 1923
  },
  "zone_bigram_counts_7zone": {
    "INITIAL_TO_EARLY": 781,
    "WITHIN_EARLY_MED": 1030,
    "EARLY_TO_CORE": 1036,
    "WITHIN_CORE": 3787,
    "CORE_TO_LATE": 1064,
    "WITHIN_LATE": 1085,
    "LATE_TO_FINAL": 838
  },
  "kl_divergence_4zone": {
    "INITIAL_TRANSITION": 1.0507,
    "EARLY_MEDIAL": 0.342813,
    "CORE": 0.105764,
    "LATE_TRANSITION": 0.385417
  },
  "kl_divergence_7zone": {
    "INITIAL_TO_EARLY": 1.0507,
    "WITHIN_EARLY_MED": 0.611995,
    "EARLY_TO_CORE": 0.5507,
    "WITHIN_CORE": 0.148657,
    "CORE_TO_LATE": 0.511015,
    "WITHIN_LATE": 0.513204,
    "LATE_TO_FINAL": 0.94886
  },
  "enriched_bigrams": {
    "INITIAL_TRANSITION": [
      {
        "class_pair": [
          29,
          7
        ],
        "role_pair": [
          "AUXILIARY",
          "FLOW_OPERATOR"
        ],
        "zone_freq": 0.005122,
        "global_freq": 0.00052,
        "ratio": 9.855,
        "zone_count": 4
      },
      {
        "class_pair": [
          49,
          9
        ],
        "role_pair": [
          "ENERGY_OPERATOR",
          "FREQUENT_OPERATOR"
        ],
        "zone_freq": 0.003841,
        "global_freq": 0.000416,
        "ratio": 9.239,
        "zone_count": 3
      },
      {
        "class_pair": [
          27,
          9
        ],
        "role_pair": [
          "AUXILIARY",
          "FREQUENT_OPERATOR"
        ],
        "zone_freq": 0.003841,
        "global_freq": 0.000416,
        "ratio": 9.239,
        "zone_count": 3
      },
      {
        "class_pair": [
          26,
          28
        ],
        "role_pair": [
          "AUXILIARY",
          "AUXILIARY"
        ],
        "zone_freq": 0.005122,
        "global_freq": 0.000624,
        "ratio": 8.213,
        "zone_count": 4
      },
      {
        "class_pair": [
          10,
          9
        ],
        "role_pair": [
          "CORE_CONTROL",
          "FREQUENT_OPERATOR"
        ],
        "zone_freq": 0.005122,
        "global_freq": 0.000624,
        "ratio": 8.213,
        "zone_count": 4
      },
      {
        "class_pair": [
          5,
          28
        ],
        "role_pair": [
          "AUXILIARY",
          "AUXILIARY"
        ],
        "zone_freq": 0.005122,
        "global_freq": 0.000624,
        "ratio": 8.213,
        "zone_count": 4
      },
      {
        "class_pair": [
          26,
          33
        ],
        "role_pair": [
          "AUXILIARY",
          "ENERGY_OPERATOR"
        ],
        "zone_freq": 0.010243,
        "global_freq": 0.001351,
        "ratio": 7.581,
        "zone_count": 8
      },
      {
        "class_pair": [
          5,
          32
        ],
        "role_pair": [
          "AUXILIARY",
          "ENERGY_OPERATOR"
        ],
        "zone_freq": 0.003841,
        "global_freq": 0.00052,
        "ratio": 7.391,
        "zone_count": 3
      },
      {
        "class_pair": [
          29,
          26
        ],
        "role_pair": [
          "AUXILIARY",
          "AUXILIARY"
        ],
        "zone_freq": 0.003841,
        "global_freq": 0.00052,
        "ratio": 7.391,
        "zone_count": 3
      },
      {
        "class_pair": [
          28,
          47
        ],
        "role_pair": [
          "AUXILIARY",
          "ENERGY_OPERATOR"
        ],
        "zone_freq": 0.005122,
        "global_freq": 0.000728,
        "ratio": 7.039,
        "zone_count": 4
      }
    ],
    "EARLY_MEDIAL": [
      {
        "class_pair": [
          43,
          8
        ],
        "role_pair": [
          "ENERGY_OPERATOR",
          "ENERGY_OPERATOR"
        ],
        "zone_freq": 0.001452,
        "global_freq": 0.000312,
        "ratio": 4.657,
        "zone_count": 3
      },
      {
        "class_pair": [
          44,
          32
        ],
        "role_pair": [
          "ENERGY_OPERATOR",
          "ENERGY_OPERATOR"
        ],
        "zone_freq": 0.001452,
        "global_freq": 0.000312,
        "ratio": 4.657,
        "zone_count": 3
      },
      {
        "class_pair": [
          9,
          17
        ],
        "role_pair": [
          "FREQUENT_OPERATOR",
          "AUXILIARY"
        ],
        "zone_freq": 0.001936,
        "global_freq": 0.00052,
        "ratio": 3.725,
        "zone_count": 4
      },
      {
        "class_pair": [
          31,
          41
        ],
        "role_pair": [
          "ENERGY_OPERATOR",
          "ENERGY_OPERATOR"
        ],
        "zone_freq": 0.001936,
        "global_freq": 0.00052,
        "ratio": 3.725,
        "zone_count": 4
      },
      {
        "class_pair": [
          6,
          33
        ],
        "role_pair": [
          "AUXILIARY",
          "ENERGY_OPERATOR"
        ],
        "zone_freq": 0.00242,
        "global_freq": 0.000728,
        "ratio": 3.326,
        "zone_count": 5
      },
      {
        "class_pair": [
          17,
          17
        ],
        "role_pair": [
          "AUXILIARY",
          "AUXILIARY"
        ],
        "zone_freq": 0.001936,
        "global_freq": 0.000624,
        "ratio": 3.105,
        "zone_count": 4
      }
    ],
    "CORE": [],
    "LATE_TRANSITION": [
      {
        "class_pair": [
          9,
          15
        ],
        "role_pair": [
          "FREQUENT_OPERATOR",
          "AUXILIARY"
        ],
        "zone_freq": 0.00156,
        "global_freq": 0.000312,
        "ratio": 5.003,
        "zone_count": 3
      },
      {
        "class_pair": [
          14,
          40
        ],
        "role_pair": [
          "FREQUENT_OPERATOR",
          "FLOW_OPERATOR"
        ],
        "zone_freq": 0.00208,
        "global_freq": 0.000416,
        "ratio": 5.003,
        "zone_count": 4
      },
      {
        "class_pair": [
          28,
          40
        ],
        "role_pair": [
          "AUXILIARY",
          "FLOW_OPERATOR"
        ],
        "zone_freq": 0.00208,
        "global_freq": 0.000416,
        "ratio": 5.003,
        "zone_count": 4
      },
      {
        "class_pair": [
          32,
          19
        ],
        "role_pair": [
          "ENERGY_OPERATOR",
          "AUXILIARY"
        ],
        "zone_freq": 0.00208,
        "global_freq": 0.000416,
        "ratio": 5.003,
        "zone_count": 4
      },
      {
        "class_pair": [
          30,
          10
        ],
        "role_pair": [
          "FLOW_OPERATOR",
          "CORE_CONTROL"
        ],
        "zone_freq": 0.00156,
        "global_freq": 0.000312,
        "ratio": 5.003,
        "zone_count": 3
      },
      {
        "class_pair": [
          36,
          30
        ],
        "role_pair": [
          "ENERGY_OPERATOR",
          "FLOW_OPERATOR"
        ],
        "zone_freq": 0.00208,
        "global_freq": 0.00052,
        "ratio": 4.002,
        "zone_count": 4
      },
      {
        "class_pair": [
          35,
          14
        ],
        "role_pair": [
          "ENERGY_OPERATOR",
          "FREQUENT_OPERATOR"
        ],
        "zone_freq": 0.00208,
        "global_freq": 0.00052,
        "ratio": 4.002,
        "zone_count": 4
      },
      {
        "class_pair": [
          29,
          22
        ],
        "role_pair": [
          "AUXILIARY",
          "AUXILIARY"
        ],
        "zone_freq": 0.00156,
        "global_freq": 0.000416,
        "ratio": 3.752,
        "zone_count": 3
      },
      {
        "class_pair": [
          17,
          39
        ],
        "role_pair": [
          "AUXILIARY",
          "ENERGY_OPERATOR"
        ],
        "zone_freq": 0.00156,
        "global_freq": 0.000416,
        "ratio": 3.752,
        "zone_count": 3
      },
      {
        "class_pair": [
          13,
          15
        ],
        "role_pair": [
          "FREQUENT_OPERATOR",
          "AUXILIARY"
        ],
        "zone_freq": 0.00156,
        "global_freq": 0.000416,
        "ratio": 3.752,
        "zone_count": 3
      }
    ]
  },
  "depleted_bigrams": {
    "INITIAL_TRANSITION": [
      {
        "class_pair": [
          34,
          33
        ],
        "role_pair": [
          "ENERGY_OPERATOR",
          "ENERGY_OPERATOR"
        ],
        "zone_freq": 0.003841,
        "global_freq": 0.013304,
        "ratio": 0.289,
        "zone_count": 3,
        "global_count": 128
      }
    ],
    "EARLY_MEDIAL": [],
    "CORE": [],
    "LATE_TRANSITION": [
      {
        "class_pair": [
          33,
          31
        ],
        "role_pair": [
          "ENERGY_OPERATOR",
          "ENERGY_OPERATOR"
        ],
        "zone_freq": 0.00156,
        "global_freq": 0.005613,
        "ratio": 0.278,
        "zone_count": 3,
        "global_count": 54
      }
    ]
  },
  "enrichment_summary": {
    "INITIAL_TRANSITION": {
      "n_enriched_3x": 37,
      "n_depleted_033x": 1
    },
    "EARLY_MEDIAL": {
      "n_enriched_3x": 6,
      "n_depleted_033x": 0
    },
    "CORE": {
      "n_enriched_3x": 0,
      "n_depleted_033x": 0
    },
    "LATE_TRANSITION": {
      "n_enriched_3x": 30,
      "n_depleted_033x": 1
    }
  },
  "top_global_bigrams": [
    {
      "class_pair": [
        33,
        33
      ],
      "role_pair": [
        "ENERGY_OPERATOR",
        "ENERGY_OPERATOR"
      ],
      "count": 177,
      "freq": 0.018397
    },
    {
      "class_pair": [
        8,
        33
      ],
      "role_pair": [
        "ENERGY_OPERATOR",
        "ENERGY_OPERATOR"
      ],
      "count": 159,
      "freq": 0.016526
    },
    {
      "class_pair": [
        34,
        33
      ],
      "role_pair": [
        "ENERGY_OPERATOR",
        "ENERGY_OPERATOR"
      ],
      "count": 128,
      "freq": 0.013304
    },
    {
      "class_pair": [
        33,
        13
      ],
      "role_pair": [
        "ENERGY_OPERATOR",
        "FREQUENT_OPERATOR"
      ],
      "count": 114,
      "freq": 0.011849
    },
    {
      "class_pair": [
        33,
        34
      ],
      "role_pair": [
        "ENERGY_OPERATOR",
        "ENERGY_OPERATOR"
      ],
      "count": 98,
      "freq": 0.010186
    },
    {
      "class_pair": [
        13,
        13
      ],
      "role_pair": [
        "FREQUENT_OPERATOR",
        "FREQUENT_OPERATOR"
      ],
      "count": 95,
      "freq": 0.009874
    },
    {
      "class_pair": [
        31,
        33
      ],
      "role_pair": [
        "ENERGY_OPERATOR",
        "ENERGY_OPERATOR"
      ],
      "count": 93,
      "freq": 0.009666
    },
    {
      "class_pair": [
        13,
        33
      ],
      "role_pair": [
        "FREQUENT_OPERATOR",
        "ENERGY_OPERATOR"
      ],
      "count": 92,
      "freq": 0.009562
    },
    {
      "class_pair": [
        33,
        8
      ],
      "role_pair": [
        "ENERGY_OPERATOR",
        "ENERGY_OPERATOR"
      ],
      "count": 89,
      "freq": 0.009251
    },
    {
      "class_pair": [
        32,
        8
      ],
      "role_pair": [
        "ENERGY_OPERATOR",
        "ENERGY_OPERATOR"
      ],
      "count": 81,
      "freq": 0.008419
    },
    {
      "class_pair": [
        8,
        32
      ],
      "role_pair": [
        "ENERGY_OPERATOR",
        "ENERGY_OPERATOR"
      ],
      "count": 80,
      "freq": 0.008315
    },
    {
      "class_pair": [
        33,
        14
      ],
      "role_pair": [
        "ENERGY_OPERATOR",
        "FREQUENT_OPERATOR"
      ],
      "count": 75,
      "freq": 0.007795
    },
    {
      "class_pair": [
        33,
        32
      ],
      "role_pair": [
        "ENERGY_OPERATOR",
        "ENERGY_OPERATOR"
      ],
      "count": 66,
      "freq": 0.00686
    },
    {
      "class_pair": [
        34,
        32
      ],
      "role_pair": [
        "ENERGY_OPERATOR",
        "ENERGY_OPERATOR"
      ],
      "count": 62,
      "freq": 0.006444
    },
    {
      "class_pair": [
        29,
        33
      ],
      "role_pair": [
        "AUXILIARY",
        "ENERGY_OPERATOR"
      ],
      "count": 61,
      "freq": 0.00634
    }
  ],
  "shuffle_test": {
    "n_shuffles": 1000,
    "seed": 42,
    "method": "Permute non-boundary tokens (keep first and last fixed)",
    "zone_results": {
      "INITIAL_TRANSITION": {
        "real_kl": 1.0507,
        "shuffle_mean": 0.985944,
        "shuffle_std": 0.020865,
        "z_score": 3.104,
        "p_value": 0.002,
        "n_shuffles_exceeding": 2
      },
      "EARLY_MEDIAL": {
        "real_kl": 0.342813,
        "shuffle_mean": 0.299936,
        "shuffle_std": 0.009062,
        "z_score": 4.731,
        "p_value": 0.0,
        "n_shuffles_exceeding": 0
      },
      "CORE": {
        "real_kl": 0.105764,
        "shuffle_mean": 0.105194,
        "shuffle_std": 0.003499,
        "z_score": 0.163,
        "p_value": 0.448,
        "n_shuffles_exceeding": 448
      },
      "LATE_TRANSITION": {
        "real_kl": 0.385417,
        "shuffle_mean": 0.385627,
        "shuffle_std": 0.011072,
        "z_score": -0.019,
        "p_value": 0.505,
        "n_shuffles_exceeding": 505
      }
    }
  },
  "verdict": "WEAK",
  "verdict_detail": "KL > 0.05 for 4 zones, p < 0.001 for 1 zones, but fewer than 2 zones pass both thresholds. Partial zone-specificity detected.",
  "pass_criteria": {
    "PASS": "KL > 0.05 bits for at least 2 zones AND p < 0.001 vs shuffle",
    "FAIL": "KL < 0.02 for all zone transitions",
    "WEAK": "Some signal but fewer than 2 zones pass both thresholds"
  }
}